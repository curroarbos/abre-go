<div class="container py-5">
<h2>My Activities</h2>
<div class="cards">
<% @activities.each do | activity | %>
  <div class="mb-3">
    <%= link_to activity_path(activity), class: "text-decoration-none text-dark" do %>
      <% if !activity.photo_url.nil?  %>
        <div class="card-category">
          <%= image_tag activity.photo_url, alt: "text", style: "background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3))", data: {aos: "zoom-in"}, loading: "lazy" %>
        </div>
      <% else %>
        <div class="card-category">
          <%= cl_image_tag activity.photo.key, height: 300, crop: :fill , alt: "text", style: "background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3))", data: {aos: "zoom-in"}, loading: "lazy" %>
        </div>
      <% end %>
      <div class="p-3 rounded-bottom d-flex flex-column">
        <div class="d-flex justify-content-between">
          <h4> <%= activity.title %> </h4>
          <p class="text-muted font-weight-normal">
            <% if activity.reviews.present? %>
              <% average_rating = activity.reviews.average(:rating).to_f %>
              <%= "%.1f" % average_rating %>
              <i class="fas fa-star star-yellow"></i>
            <% else %>
                New
            <% end %>
          </p>
        </div>
          <p> <%= activity.location %> </p>
          <div class="d-flex justify-content-between">
          <p> <strong><%= activity.price %> â‚¬ </strong></p>
          <%= link_to edit_activity_path(activity) do %>
            <i class="fa-regular fa-pen-to-square"></i>
          <% end %>
          <%= link_to activity_path(activity), class:"text-danger", data: {turbo_method: :delete , turbo_confirm: "Are you sure?"} do %>
            <i class="fa-solid fa-trash"></i>
          <% end %>
          <% unless activity.config_time_slot.nil?  %>
            <%= link_to "Edit time slots", config_time_slot_path(activity.config_time_slot), class: 'btn btn-primary' %>
          <% else %>
            <%= link_to "Create time slots", new_activity_config_time_slot_path(activity), class: 'btn btn-primary' %>
          <% end %>
          </div>
        </div>
    <% end %>
  </div>
<% end %>
</div>
</div>
